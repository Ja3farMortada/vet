<div class="container-fluid">

    <br>

    <div class="row">
        <div class="col-5">
            <div class="card shadow">
                <div class="card-header text-center" style="border-bottom: 0px;">
                    <button class="btn btn-outline-primary btn-sm" ng-click="openAnimalModal('add')"><i
                            class="fas fa-plus"></i> New Profile</button>
                </div>
                <div class="card-body p-0">
                    <table class="table m-0 table-borderless text-center table-hover">
                        <thead class="bg-light table-sm">
                            <tr class="table-actives">
                                <th>
                                    <input type="text" class="form-control form-control-sm" ng-model="search.owner_name"
                                        spellcheck="false" placeholder="Owner...">
                                </th>
                                <th>
                                    <input type="text" class="form-control form-control-sm"
                                        ng-model="search.phone_number" spellcheck="false" placeholder="Phone...">
                                </th>
                                <th>
                                    <input type="text" class="form-control form-control-sm"
                                        ng-model="search.animal_name" spellcheck="false" placeholder="Animal Name...">
                                </th>
                                <th width="15%">
                                    <select class="form-control form-control-sm" ng-model="search.species">
                                        <option value="">Any</option>
                                        <option value="dog">Dog</option>
                                        <option value="cat">Cat</option>
                                    </select>
                                </th>
                            </tr>
                            <tr>
                                <th>Owner</th>
                                <th>Phone</th>
                                <th>Animal Name</th>
                                <th>Species</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-top"
                                dir-paginate="data in animals | filter:search:strict | itemsPerPage: 5"
                                ng-click="showAnimalDetails(data)"
                                ng-class="{'table-active': isActive(data.animal_ID)}">
                                <td>{{ data.owner_name }}</td>
                                <td>{{ data.phone_number || '----' }}</td>
                                <td>{{ data.animal_name }}</td>
                                <td>
                                    <span class="badge badge-pill"
                                        ng-class="{'badge-brown text-light': data.species == 'dog', 'badge-secondary': data.species == 'cat'}">
                                        <i class="fas"
                                            ng-class="{'fa-dog': data.species == 'dog', 'fa-cat': data.species == 'cat'}"></i>
                                        {{ data.species }}
                                    </span>
                                </td>
                            </tr>
                            <tr class="table-active" ng-if="animals.length == 0">
                                <td colspan="4">There Are No Records Yet!</td>
                            </tr>
                            <tr ng-if="(animals | filter: search).length == 0 && search"
                                class="table-active select-off">
                                <td colspan="4">No Matching Records Found!</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="card-footer d-flex justify-content-center">
                    <div class="col-5">
                        <dir-pagination-controls max-size="5" direction-links="true" boundary-links="false"
                            template-url="../templates/dirPagination.tpl.html">
                        </dir-pagination-controls>
                    </div>
                </div>
            </div>

            <!-- Service buttons -->
            <div class="row mt-3" ng-show="selectedAnimal">
                <div class="col-6">
                    <button class="btn btn-outline-danger btn-lg btn-block"><i class="fas fa-clinic-medical fa-lg"></i> New Treatment</button>
                </div>
                <div class="col-6">
                    <button class="btn btn-outline-info btn-lg btn-block"><i class="fas fa-paw fa-lg"></i> New Service</button>
                </div>
            </div>
        </div>

        <!-- Selected Animal Section -->
        <div class="col-7" ng-show="selectedAnimal">
            <div class="card shadow">
                <div class="card-header">
                    <h3 class="m-0 text-center">{{ selectedAnimal.animal_name }} <span class="float-right">
                            <div class="dropdown">
                                <button class="btn btn-light" data-toggle="dropdown">
                                    <i class="fas fa-cog fa-lg text-dark"></i>
                                </button>
                                <div class="dropdown-menu dropdown-menu-right">
                                    <a class="dropdown-item text-info" href="" ng-click="openAnimalModal('edit')"><i
                                            class="fas fa-edit fa-lg"></i> Edit Profile</a>
                                    <a class="dropdown-item text-danger" href="" ng-click="deleteAnimal()"><i
                                            class="fas fa-trash-alt fa-lg"></i> Delete Profile</a>
                                </div>
                            </div>
                        </span>
                    </h3>
                </div>
                <div class="card-body">
                    <!-- <div class="row"> -->
                    <div class="">
                        <table class="table table-borderless text-center">
                            <h5 class="text-center"><i class="fas fa-info-circle fa-lg"></i> Additional Info</h5>
                            <tr>
                                <th width="20%">Breed</th>
                                <th width="15%">Gender</th>
                                <th width="20%">Age</th>
                                <th width="15%">Birthdate</th>
                                <th width="30%">Notes</th>
                            </tr>
                            <tr>
                                <td>{{ selectedAnimal.breed }}</td>
                                <td><i ng-class="{'fa-mars text-primary': selectedAnimal.gender == 'male', 'fa-venus text-pink': selectedAnimal.gender == 'female'}"
                                        class="fas fa-lg"></i> {{ selectedAnimal.gender }}</td>
                                <td>{{ selectedAge }}</td>
                                <td>{{ selectedAnimal.birthdate }}</td>
                                <td>{{ selectedAnimal.notes || '----'}}</td>
                            </tr>
                        </table>
                    </div>

                    <hr>

                    <div>
                        <h5 class="text-center"><i class="fas fa-book-medical fa-lg"></i> Medical History</h5>
                        <br>

                        <ul class="cbp_tmtimeline">
                            <li>
                                <time
                                    class="cbp_tmtime"><span>{{ moment(selectedAnimal.birthdate).format('MMM DD YYYY') }}</span>
                                    <span>{{ selectedAge }} ago</span></time>
                                <div class="cbp_tmicon"
                                    ng-class="{'bg-primary': selectedAnimal.gender == 'male', 'bg-pink': selectedAnimal.gender == 'female'}">
                                    <i class="fas text-light"
                                        ng-class="{'fa-dog': selectedAnimal.species == 'dog', 'fa-cat': selectedAnimal.species == 'cat'}"></i>
                                </div>
                                <div class="cbp_tmlabel">
                                    <h5>Born</h5>
                                </div>
                            </li>

                            <!-- <li ng-repeat="record in medicalHistory">
                                <time class="cbp_tmtime"><span>May 5 2022</span>
                                    <span>Two weeks ago</span></time>
                                <div class="cbp_tmicon bg-success"><i class="fas fa-syringe text-light"></i></div>
                                <div class="cbp_tmlabel">
                                    <h5>Vaccinated</h5>
                                    <p>Took XYZA Vaccine.</p>
                                </div>
                            </li> -->

                            <!-- <li>
                                <time class="cbp_tmtime" datetime="2017-11-04T03:45"><span>March 15 2022</span>
                                    <span>Five months ago</span></time>
                                <div class="cbp_tmicon bg-warning"><i class="fas fa-user-md"></i></div>
                                <div class="cbp_tmlabel">
                                    <h5>Checkup</h5>
                                    <p>Routine Checkup.</p>
                                </div>
                            </li>

                            <li>
                                <time class="cbp_tmtime" datetime="2017-11-04T03:45"><span>Jun 1 2021</span>
                                    <span>One year ago</span></time>
                                <div class="cbp_tmicon bg-danger"><i class="fas fa-ambulance"></i></div>
                                <div class="cbp_tmlabel">
                                    <h5>Hand splinting</h5>
                                    <p>Broken hand.</p>
                                </div>
                            </li>

                            <li>
                                <time class="cbp_tmtime" datetime="2017-11-04T03:45"><span>May 5 2018</span>
                                    <span>4 years ago</span></time>
                                <div class="cbp_tmicon bg-success"><i class="fas fa-syringe text-light"></i></div>
                                <div class="cbp_tmlabel">
                                    <h5>Vaccinated</h5>
                                    <p>Took XYZA Vaccine.</p>
                                </div>
                            </li> -->
                        </ul>

                    </div>

                </div>
                <!-- <div class="card-footer text-center">
                    
                </div> -->
            </div>
        </div>
    </div>

</div>

<!-- Animal MODAL -->
<div class="modal fade" id="animalModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">{{ modalTitle }}</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <form ng-submit="submit()">
                <!-- Modal body -->
                <div class="modal-body">
                    <!-- Animal Data -->
                    <h3>Animal Data</h3>
                    <div class="row">
                        <div class="col-4">
                            <label>Animal Name</label>
                            <input ng-model="animalData.animal_name" type="text" class="form-control" autofocus required
                                spellcheck="false">
                        </div>
                        <div class="col-4">
                            <label>Species</label>
                            <select ng-model="animalData.species" class="form-control" required>
                                <option value=""> --- </option>
                                <option value="dog">Dog</option>
                                <option value="cat">Cat</option>
                            </select>
                        </div>
                        <div class="col-4">
                            <label>Breed</label>
                            <input ng-model="animalData.breed" type="text" class="form-control" required
                                spellcheck="false">
                        </div>
                        <div class="col-4">
                            <label>Gender</label>
                            <select ng-model="animalData.gender" class="form-control">
                                <option value=""> --- </option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                        <div class="col-4">
                            <label>Approximate Birthdate</label>
                            <input ng-model="animalData.birthdate" id="birthdatePicker" type="text"
                                class="form-control text-center" required spellcheck="false">
                        </div>
                    </div>

                    <br>
                    <h3>Owner Data</h3>
                    <!-- Owner data -->
                    <div class="row">
                        <div class="col-4">
                            <label>Owner Name</label>
                            <input ng-model="animalData.owner_name" type="text" class="form-control" required
                                spellcheck="false">
                        </div>
                        <div class="col-4">
                            <label>Owner Phone</label>
                            <input ng-model="animalData.phone_number" type="number" class="form-control" required
                                spellcheck="false">
                        </div>
                        <div class="col-4">
                            <label>Owner Address</label>
                            <input ng-model="animalData.address" type="text" class="form-control" spellcheck="false">
                        </div>

                        <div class="col-12">
                            <label>Notes</label>
                            <textarea ng-model="animalData.notes" rows="2" class="form-control"></textarea>
                        </div>
                    </div>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal"><i class="fas fa-times"></i>
                        Cancel</button>
                    <button class="btn btn-success" type="submit"><i class="fas fa-check"></i>
                        Confirm</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- edit settings MODAL -->
<div class="modal fade" id="editSettingsModal">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Edit</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <form ng-submit="submitEditSettings()">
                <!-- Modal body -->
                <div class="modal-body">
                    <label>New Value</label>
                    <input type="number" min="0" class="form-control text-center" spellcheck="false"
                        ng-model="editModalData.value">
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal"><i class="fas fa-times"></i>
                        Cancel</button>
                    <button class="btn btn-primary" type="submit"><i class="fas fa-check"></i>
                        Confirm</button>
                </div>
            </form>
        </div>
    </div>
</div>